# 插入模式下快捷键

前面已经讲解了如何进入插入模式，并且应该知道插入模式就是用来写人内容的，我们经常工作在插入模式下，所以插入模式也提供了一些常用的快捷键来简化操作(其实就是避免频繁切换Normal与Insert模式)，由于插入模式下不能使用类似Nomral模式下那些字符作为快捷键，插入模式下的快捷键通常都是以ctrl开头的，这与其他编辑器没有两样，实际上大多数编辑器都只在插入模式下工作，所以会频繁使用ctrl alt这样的组合键，而vim通过不同模式的切换来完成。本篇文章主要介绍的是在插入模式下的一些快捷操作，实际上其中大多数都可以在Normal模式中完成，并且还介绍了一些高级的插入文本操作。

## 如何进入插入模式  

首先让我们回顾下如何进入插入模式：  

| 命令 | 说明                                       |
|------|--------------------------------------------|
| a    | 在光标后附加文本                           |
| A    | 在行尾附加文本                             |
| i    | 在光标前插入文本                           |
| I    | 在本行第一个非空字符前插入文本             |
| gI   | 在行首插入文本                             |
| gi   | 在最近一次的插入模式停止的位置继续插入文本 |
| o    | 在光标下方开启新行并插入文本               |
| O    | 在光标上方开启新行，并插入文本             |

备注：需要注意的是，其实插入操作就是向缓冲区内添加内容，缓冲区就是我们说的buffer，在文件打开的时候实际上就是将文件加载的内存中，而实际上插入就是向这段内存中添加内容。  
插入模式下的其他表现：对于编程尤其是python这样的具有缩进的编程语言，可以打开 autoindent 选项，这样在开始一个新行的时候其首行的缩进从上一行得到。对于类C语言，可以打开smartindent或cindent，其行的缩进会根据C程序的要求自行调整。 但是需要注意的时候，如果设置了这些indent类选项在，在复制具有缩进内容的时候会出现错乱，这个时候可以使用在命令行使用:set paste复位该选项，粘贴完成后重新复位恢复indent类选项。

## 插入模式下操作

### 插入模式下更改操作

| 命令          | 说明                                                                                             |
|---------------|--------------------------------------------------------------------------------------------------|
| Esc Ctrl+[    | 这两个命令都可以退出插入模式                                                                     |
| ctrl+h        | 删除光标前的字符，与bs键相同                                                                     |
| Ctrl+w        | 删除光标前的单词                                                                                 |
| Ctrl+u        | 删除当前行上光标前的所有字符                                                                     |
| Ctrl+m Ctrl+j | 开始新行，这跟按下回车是一样的                                                                   |
| Ctrl+k        | 输入二合字母，可以使用:digraphs来查看所有二合字母，例如Ctrl+k Co就是输入了©                      |
| Ctrl+r 寄存器 | 插入寄存器内容，双引号代表无名寄存器，我们d y操作的内容都保存在这里，Ctrl+r "就相当与normal中的p |
| Ctrl+t        | 在当前行开始处插入一个shiftwidth的缩进，可以使用shiftwidth参数来甚至缩进代表的空格数             |
| Ctrl+d        | 删除当前行的一个shiftwidth缩进                                                                   |

### 插入模式下光标移动操作

| 命令     | 说明           |
|----------|----------------|
| ctrl+g k | 光标上移动一行 |
| ctrl+g j | 光标下移动一行 |

备注：其实还有很多光标移动的命令但是都是通过方向键实现的，这与其他编辑器中的移动基本上差不多，而且不推荐使用。  
说明：我们根据上面可以看到，这些修改命令都是向前的修改，向前删除一个字符一个单词等，所以如果中间需要修改的话还是进入Normal中移动吧。  

## Ctrl+X 系列

该系列使用Ctrl+x作为前导键，用于补全输入部分关键字或者行。其具体如下：  

| 命令          | 说明                                                                                                                 |
|---------------|----------------------------------------------------------------------------------------------------------------------|
| Ctrl+x ctrl+l | 反向搜索和当前光标前字符序列完全相同的行,找到后可以插入到光标的前面去                                                |
| Ctrl+x Ctrl+n | 正向搜索以光标前面的关键字开始的单词，找到的关键字插入到光标的前面                                                   |
| Ctrl+x Ctrl+p | 反向搜索以光标前面的关键字开始的单词，找到的关键字插入到光标的前面                                                   |
| Ctrl+x Ctrl+k | 根据dictionary选项给出的文件搜索光标钱关键字开始的单词，与上面两个相类似，不过一个搜索的当前文件一个是设置的字典文件 |
| Ctrl+x Ctrl+t | 与上一个类似，不过搜索的选项由thesaurus给出                                                                          |
| Ctrl+x ctrl+i | 搜索当前文件及其头文件里第一个以光标前面的字母序列开始的关键字                                                       |
| Ctrl+x Ctrl+] | 搜索第一个以光标前面的字母序列开始的标签，匹配的标签插入到光标前面                                                   |
| ctrl+x Ctrl+f | 搜索第一个以光标前面的字母序列开始的文件                                                                             |
| Ctrl+x Ctrl+d | 搜索当前和头文件里第一个以光标前的字母序列开始的定义                                                                 |
| Ctrl+x Ctrl+v | 猜测光标前面的项目的条目，并找到第一个匹配                                                                           |
| Ctrl+x Ctrl+o | 全能补全，有用户通过omnifunc选项自定义一个函数来完成，通常需要安装相应的插件用于特定文件类型的补全                   |
| Ctrl+n        | 以上补全如果有多个选项的话，使用该命令来下移动                                                                       |
| Ctrl+p        | 以上补全如果有多个选项的话，使用该命令来上移动                                                                       |
| Ctrl+x Ctrl+e | 在插入模式下可以让屏幕上移一行                                                                                       |
| Ctrl+x Ctrl+y | 在插入模式下可以让屏幕下移一行，严格意义上这并不属于补全系列，但是也使用了Ctrl+x前缀                                 |

备注：以上这么多补全的方式，经常使用的是Ctrl+x Ctrl+f文件补全和全能补全。当然vim中内置的补全毕竟功能有限，真正意义上使用还是需要安装插件来完成，比如coc系列。

## 文件插入

在vim的编辑过程中，可以将其他文件甚至命令行输出都插入到当前文件中。通过使用:r[ead]命令来完成。  

> :r file   在光标下方插入文件  
> :r !{cmd}     执行{cmd}并把它的标准输出插入到光标下方 :r !ls -al
